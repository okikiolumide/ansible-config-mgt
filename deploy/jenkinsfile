pipeline {
    agent any
    environment {
  workspace = "_mgt_feature/jenkinspipeline-dev"
  role_path = "var/lib/jenkins/workspace/"${workspace}"+"/roles""
}

  stages {
    stage('Clone Git Repo') {
      steps {
        script {
          git branch: 'feature/jenkinspipeline-dev', url: 'https://github.com/okikiolumide/ansible-config-mgt.git'
        }
      }
    }

    stage('Update Ansible role path') {
      steps {
        script {
          sh sh ('sudo sed -i -e "/roles_path = \\/[a-z]*\\/*/a\\roles_path = $role_path" -e "/roles_path = \\/[a-z]*\\/*/d" /etc/ansible/ansible.cfg')
        }
      }
    }
    }
}
